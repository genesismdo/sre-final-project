#monitoring/sre-monitoring-rules
apiVersion: v1
kind: ConfigMap
metadata:
  name: prometheus-rules
  namespace: monitoring
data:
  sre-rules.yaml: |
    groups:
      - name: sre-monitoring-alerts
        rules:
          # ALERTA 1 ‚Äì La app no responde o est√° ca√≠da
          - alert: AppDown
            expr: up{job="sre-monitoring-app"} == 0
            for: 1m
            labels:
              severity: critical
            annotations:
              description: "La aplicaci√≥n no est√° respondiendo üìõ"
              summary: "SRE Monitoring App est√° ca√≠da."

          # ALERTA 2 ‚Äì Muy pocas peticiones
          - alert: LowRequestTraffic
            expr: rate(example_app_http_requests_total[2m]) < 0.1
            for: 2m
            labels:
              severity: warning
            annotations:
              description: "El tr√°fico hacia la app baj√≥ considerablemente."
              summary: "Pocas requests recibidas por la app."
